@model EstacionamentoMvc.Models.MovimentoEstacionamento

<div class="container mt-4">
    <h2>‚úèÔ∏è Editar Ve√≠culo</h2>

    <!-- Verifica se admin j√° autenticou -->
    @* @if (ViewBag.IsAdmin == true) *@
    {
        <!-- Edi√ß√£o normal -->
        <form asp-action="Editar" method="post">
            <input type="hidden" asp-for="Id" />

            <div class="mb-3">
                <label asp-for="Placa" class="form-label"></label>
                <input asp-for="Placa" class="form-control" />
            </div>


            <button type="submit" class="btn btn-success">üíæ Salvar</button>
            <a asp-action="Index" class="btn btn-secondary">‚Ü© Voltar</a>
        </form>

        <hr />

        <!-- Se admin autenticado ‚Üí tamb√©m exibe edi√ß√£o da tarifa -->
        <h4>‚öôÔ∏è Ajustar Tarifa</h4>
        <a asp-controller="Tarifa" asp-action="Edit" asp-route-id="1" class="btn btn-dark">
            ‚úèÔ∏è Editar Tarifa
        </a>
    }
    else
    {
        <!-- Modal login -->
        <div class="alert alert-warning">üîí √Årea restrita - Informe usu√°rio e senha</div>

        <form asp-action="AdminLogin" method="post">
            <div class="mb-3">
                <label for="adminUser">Usu√°rio</label>
                <input type="text" name="adminUser" class="form-control" autofocus />
            </div>
            <div class="mb-3">
                <label for="adminPass">Senha</label>
                <input type="password" name="adminPass" class="form-control" />
            </div>
            <button type="submit" class="btn btn-primary">Entrar</button>
        </form>
    } 
    <script>
    $(document).ready(function() {
    $("#loginForm").submit(function(e) {
        e.preventDefault(); // evita submit normal

        $.post($(this).attr("action"), $(this).serialize(), function(response) {
            if(response.success) {
                // Fecha o modal
                $("#adminLoginModal").hide();

                // Redireciona automaticamente
                window.location.href = response.redirectUrl;
            } else {
                // Mostra mensagem de erro
                $("#loginMessage").text(response.message);
            }
        });
    });

    // Fechar modal clicando no X
    $(".close").click(function() {
        $("#adminLoginModal").hide();
    });
});
</script>
</div>
