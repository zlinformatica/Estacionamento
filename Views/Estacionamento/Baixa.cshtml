@model EstacionamentoMvc.Models.MovimentoEstacionamento
@using Microsoft.AspNetCore.Http

@{
    ViewData["Title"] = "Baixa";

    var isAdmin = Context.Session.GetString("AdminLogado") == "true";
}

<h2>Baixa de Veículo</h2>

<div class="alert alert-info">
    <strong>Placa:</strong> @Model.Placa <br />
    <strong>Modelo:</strong> @Model.Modelo <br />
    <strong>Entrada:</strong> @Model.DataEntrada.ToString("g") <br />
    <strong>Permanência (minutos):</strong> @ViewBag.Permanencia <br />
</div>

<form asp-action="Baixa" method="post">
    <input type="hidden" name="id" value="@Model.Id" />

    @if (isAdmin)
    {
        @* <div class="form-group">
            <label for="adminUser">Usuário Admin</label>
            <input type="text" name="adminUser" class="form-control" />
        </div>

        <div class="form-group">
            <label for="adminPass">Senha Admin</label>
            <input type="password" name="adminPass" class="form-control" />
        </div> *@

        <div class="form-group">
            <label for="descontoPercentual">Desconto (%)</label>
            <input type="number" name="descontoPercentual" class="form-control" />
        </div>

        <div class="form-group">
            <label for="descontoMinutos">Desconto em Minutos</label>
            <input type="number" name="descontoMinutos" class="form-control" />
        </div>
    }

        <button type="submit" class="btn btn-success" @(Model.DataSaida != null ? "disabled" : "")>
        Confirmar Baixa
        </button>

    @* <button type="submit" class="btn btn-success">Confirmar Baixa</button> *@
    <a asp-action="Index" class="btn btn-secondary">Cancelar</a>
</form>
